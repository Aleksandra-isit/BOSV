<Window x:Class="TryCameraEnguCV.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TryCameraEnguCV"
        mc:Ignorable="d"
        Title="EmguCV Video" Height="1080" Width="1920" Loaded="Window_Loaded" Background="Black"
        MouseDown="Window_MouseDown" WindowStartupLocation="CenterScreen" WindowState="Maximized" ResizeMode="NoResize">

    <!-- Ввод горячих клавиш -->
    <Window.InputBindings>
        <KeyBinding Key="F1" Command="{Binding ToggleScreenDataCommand}" />
        <KeyBinding Key="F2" Command="{Binding ToggleSharpnessCommand}" />
        <KeyBinding Key="F3" Command="{Binding ToggleFreezeFrameCommand}" />
        <KeyBinding Key="F5" Command="{Binding ToggleStopwatchCommand}" />
        <KeyBinding Key="F6" Command="{Binding ScreenshotCommand}" />
        <KeyBinding Key="F10" Command="{Binding ShowSettingsMenuCommand}" />
        <KeyBinding Key="F3" Modifiers="Control" Command="{Binding FocusOnTextBoxCommand}" />
        <KeyBinding Key="F4" Modifiers="Control" Command="{Binding ClearTextCommand}" />
        <KeyBinding Key="F5" Modifiers="Control" Command="{Binding ToggleOrientationCommand}" />
        <KeyBinding Key="F6" Modifiers="Control" Command="{Binding VideoRecordingCommand}" />
        <KeyBinding Key="F11" Modifiers="Control" Command="{Binding ToggleScaleCommand}" />
    </Window.InputBindings>


    <Grid>

        <Grid.RowDefinitions>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <!-- Слой видео + оверлей -->
        <Grid x:Name="videoContainer" Grid.Row="0">
            <Image Name="cameraImage" Stretch="Uniform" />
            <Image Name="miniCameraImage" Stretch="Uniform" Width="320" Height="180" Margin="10" VerticalAlignment="Bottom" HorizontalAlignment="Right" />

            <!-- Панель для ФИО в левом верхнем углу -->
            <StackPanel x:Name="PatientDataStackPanel" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10" Background="#66000000">

                <StackPanel HorizontalAlignment="Right" Margin="10">
                    <Label Content="Фамилия:" FontSize="24" Foreground="White" Padding="5,5,5,10" FontWeight="Bold"/>
                    <Label Content="Имя:" FontSize="24" Foreground="White" Padding="5,10,5,10" FontWeight="Bold"/>
                    <Label Content="Отчество:" FontSize="24" Foreground="White" Padding="5,10,5,10" FontWeight="Bold"/>
                </StackPanel>

                <StackPanel HorizontalAlignment="Right" Margin="10">
                    <TextBox Name="SurnameTextBox" Foreground="White" FontWeight="Bold" Text="Введите фамилию"
                     GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus" FontSize="24" Padding="10,2,10,2" Margin="0,5,0,5" 
                             Background="{x:Null}" MinWidth="245" KeyDown="TextBox_KeyDown"/>
                    <TextBox Name="NameTextBox" Foreground="White" FontWeight="Bold" Text="Введите имя"
                     GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus" FontSize="24" Padding="10,2,10,2" Margin="0,5,0,5" 
                             Background="{x:Null}" MinWidth="245" KeyDown="TextBox_KeyDown"/>
                    <TextBox Name="PatronymicTextBox" Foreground="White" FontWeight="Bold" Text="Введите отчество"
                     GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus" FontSize="24" Padding="10,2,10,2" Margin="0,5,0,0" 
                             Background="{x:Null}" MinWidth="245" KeyDown="TextBox_KeyDown"/>
                </StackPanel>

            </StackPanel>

            <!-- Текст в правом верхнем углу -->
            <StackPanel x:Name="TimeStackPanel" Orientation="Vertical"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="10">
                <TextBlock Name="dateText"
                           FontSize="24"
                           Foreground="White"
                           Background="#66000000"
                           Padding="5"
                           Margin="0,0,0,5"/>
                <TextBlock Name="timeText"
                           FontSize="24"
                           Foreground="White"
                           Background="#66000000"
                           Padding="5" Margin="0,0,0,5"/>
                <TextBlock Name="stopwatchText"
                           FontSize="24"
                           Foreground="White"
                           Background="#66000000"
                           Padding="5" Visibility="Collapsed"/>
            </StackPanel>

            <Button x:Name="SettingsButton" Width="50" Height="50"
                    Click="SettingsButton_Click"
                    ToolTip="Открыть меню"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Margin="0,0,60,30"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    Focusable="False">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Image x:Name="Icon" Source="pack://application:,,,/Resources/menu-icon.png" Stretch="Uniform"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Icon" Property="Source" Value="pack://application:,,,/Resources/menu-icon-hover.png"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Icon" Property="Source" Value="pack://application:,,,/Resources/menu-icon-hover.png"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

        </Grid>
    </Grid>
</Window>
